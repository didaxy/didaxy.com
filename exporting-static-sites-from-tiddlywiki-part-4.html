<!doctype html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="generator" content="TiddlyWiki" />
<meta name="tiddlywiki-version" content="5.2.3" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
<meta name="mobile-web-app-capable" content="yes"/>
<meta name="format-detection" content="telephone=no">
<link id="faviconLink" rel="shortcut icon" href="./favicon.png">
<link rel="stylesheet" href="static.css">
<title>Exporting Static Sites From Tiddlywiki Part 4: Didaxy.com ‚Äî Computers and Learning, Tutorials, index, Configurator</title>
</head>
<body><p><nav class="header">
<ul class="header-nav header-nav-left">
<li class="header-item header-site-logo">
<a class="header-nav-link" href="./index.html">
<img src="data:image/svg+xml,%3Csvg%20width%3D%22400%22%20height%3D%22400%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Asvg%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%20%3C!--%20Created%20with%20SVG-edit%20-%20http%3A%2F%2Fsvg-edit.googlecode.com%2F%20--%3E%0A%0A%20%3Cg%20display%3D%22inline%22%3E%0A%20%20%20%20%3Cpath%20fill%3D%22%23000%22%20fill-rule%3D%22evenodd%22%20stroke%3D%22%23000%22%20stroke-width%3D%226%22%20d%3D%22m158.5%2C150l42%2C-130c0%2C0%2049%2C131%2049%2C131c0%2C0%20135%2C3%20135%2C3c0%2C0%20-109%2C80%20-109%2C80c0%2C0%2041%2C132%2041%2C132c0%2C0%20-93%2C-64%20-93%2C-64c0%2C0%200%2C-73%20-2%2C-74c-2%2C-1%20-32%2C-7%20-34%2C-5c-2%2C2%20-2%2C79%20-2%2C79c0%2C0%20-96%2C66%20-96%2C66c0%2C0%2040%2C-131%2040%2C-131c0%2C0%20-110%2C-86%20-110%2C-86c0%2C0%20139%2C-1%20139%2C-1%0A%0AM179.0278%2C185c0%2C-14.07304%2011.39915%2C-25.4722%2025.4722%2C-25.4722c14.07304%2C0%2025.4722%2C11.39915%2025.4722%2C25.4722c0%2C14.07304%20-11.39915%2C25.4722%20-25.4722%2C25.4722c-14.07304%2C0%20-25.4722%2C-11.39915%20-25.4722%2C-25.4722%22%2F%3E%0A%20%20%3C%2Fg%3E%0A%3C%2Fsvg%3E" width="48px"></a>
</li>
<li class="header-item header-site-home">
<a class="header-nav-link" href="./index.html">Didaxy</a>
</li>
<div id="header-toggle">üçî</div>
</ul>
<ul class="header-nav header-nav-right">


<li class="header-item header-collapsable dropdown">
<a class="tc-tiddlylink tc-tiddlylink-resolves header-nav-link" href="./recent.html">Recent</a>
</li>



<li class="header-item header-collapsable ">
<a class="tc-tiddlylink tc-tiddlylink-resolves header-nav-link" href="./tutorials.html">Tutorials</a>
</li>



<li class="header-item header-collapsable ">
<a class="tc-tiddlylink tc-tiddlylink-resolves header-nav-link" href="./contact.html">Contact</a>
</li>


</ul>
</nav></p><section class="page-content">
<p><div class="frame"><div class="tc-tiddler-body tc-reveal"><h1 class="">Exporting Static Sites From Tiddlywiki</h1><h2 class="">Part 4: Adding Javascript and Per-page Resources</h2><p><h3 class="tutorial-parts">Part: <a class="tc-tiddlylink tc-tiddlylink-resolves" href="./exporting-static-sites-from-tiddlywiki.html">0</a>

<a class="tc-tiddlylink tc-tiddlylink-resolves" href="./exporting-static-sites-from-tiddlywiki-part-1.html">  1</a>

<a class="tc-tiddlylink tc-tiddlylink-resolves" href="./exporting-static-sites-from-tiddlywiki-part-2.html">  2</a>

<a class="tc-tiddlylink tc-tiddlylink-resolves" href="./exporting-static-sites-from-tiddlywiki-part-3.html">  3</a>

<a class="tc-tiddlylink tc-tiddlylink-resolves" href="./exporting-static-sites-from-tiddlywiki-part-4.html">  4</a>

<a class="tc-tiddlylink tc-tiddlylink-resolves" href="./exporting-static-sites-from-tiddlywiki-part-5.html">  5</a>

<a class="tc-tiddlylink tc-tiddlylink-resolves" href="./exporting-static-sites-from-tiddlywiki-part-6.html">  6</a>

<a class="tc-tiddlylink tc-tiddlylink-resolves" href="./exporting-static-sites-from-tiddlywiki-part-7.html">  7</a>

<a class="tc-tiddlylink tc-tiddlylink-resolves" href="./exporting-static-sites-from-tiddlywiki-part-8.html">  8</a>

<a class="tc-tiddlylink tc-tiddlylink-resolves" href="./exporting-static-sites-from-tiddlywiki-part-9.html">  9</a>

<a class="tc-tiddlylink tc-tiddlylink-resolves" href="./exporting-static-sites-from-tiddlywiki-part-10.html">  10</a>

</h3></p><h2 class="">Summary</h2><p>In the <a class="tc-tiddlylink tc-tiddlylink-resolves" href="./exporting-static-sites-from-tiddlywiki-part-3.html">previous section</a>, we added the Bootstrap framework and got it to play nicely with Tiddlywiki but we saw that, although the menus were responsive, they lacked functionality.</p><p>In this section we're going to add that functionality by loading the necessary javascript and then use the same technique to add some Google Analytics code.</p><p>We'll also look at how we can add individual pieces of javascript and css on a page-by-page basis to customise how each page looks and behaves.</p><h2 class="">Adding Bootstrap Javascript from the CDN</h2><p>Getting the responsive menus to work is really easy (like everything, if you know how) - we can load the necessary scripts from a CDN, just like we did with the css.</p><p>The links we need can be found on the <a class="tc-tiddlylink-external" href="http://getbootstrap.com/" rel="noopener noreferrer" target="_blank">website</a>. The ones we used look like this.</p><pre><code>&lt;script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"&gt;&lt;/script&gt;
&lt;script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js" integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4" crossorigin="anonymous"&gt;&lt;/script&gt;
&lt;script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/js/bootstrap.min.js" integrity="sha384-h0AbiXch4ZDo7tp9hKZ4TsHbi047NrKGLO3SEJAg45jXxnGIfYzk4Si90RDIqNm1" crossorigin="anonymous"&gt;&lt;/script&gt;
</code></pre><p>The only difference, when including javascript files is that, instead of in the <code>&lt;head&gt;</code>, they usually go right before the  closing <code>&lt;/body&gt;</code>, which is where we'll put them in  <code>$:/didaxy/templates/static.tiddler.html</code></p><h2 class="">Adding Bootstrap and jQuery without the CDN</h2><p>Just as with the css files, if we had a good reason to, we could instead download the javascript files and include them into our own pages.</p><p>The thing we'd need to be careful about here, however, is that whilst our css is being made into a separate file each time we rebuild our site (<code>static.css</code>) any javascript we add will get inlined into the page itself.</p><p>If we did this with the bootstrap javascript code we'd be forcing our users to reload the javascript on every page, instead fo just once for the whole site, which is probably not what we want to do.</p><p>To solve this problem, we would set up a mechanism just like the one that currently 'bundles' the css into its own file, to do the same for javascript. </p><p>It's much easier for now to just load them from the CDN.</p><h2 class="">Adding Google Analytics</h2><p>Having said that, there are some pieces of javascript that we really might want inlined into each page and the Google analytics tracking code is one of them.</p><p>If you want to do this, you need to sign up for google analytics, which will give you a snippet of code that looks like this</p><pre><code>&lt;script&gt;
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-XXXXXXXXX-1', 'auto');
  ga('send', 'pageview');

&lt;/script&gt;</code></pre><p>where <code>XXXXXXXXXX</code> is a code unique to you.</p><p>If you put this code in a tiddler called <code>$:/didaxy/scripts/ganalytics.js</code> you can include it in your pages by adding the line </p><pre><code>`{{$:/didaxy/scripts/ganalytics.js||$:/core/templates/plain-text-tiddler}}`</code></pre><p>to <code>$:/didaxy/templates/static.tiddler.html</code>.</p><p>Note that, for inclusion in a plugin, we'd ideally like not to have to hard-code the tracking code into this tiddler and use a layer of transclusion instead.</p><p>Unfortunately, when we use two layers of transclusion it gets really difficult to get things to show up the way we want them to. There's probably a way to do it, but for now the easiest workaround is to include the tracking snippet directly into <code>$:/didaxy/templates/static.tiddler.html</code> and have it just transcluding the tracking code, which is stored in <code>$:/didaxy/token/ganalytics</code>. This is sub-optimal because it complicates the template and mixes javascript in with the html (and wikitext) but it'll do for now.</p><h2 class="">Per page resources</h2><p>Everything we've discussed so far is to do with adding the same styling and code to each page of our site.</p><p>It seems a shame, though, to be constructing our own build system and not have more "fine-grained" control over what gets included in each page.</p><p>What would be really great would be if we could add stylesheets and scripts to individual pages, and we can. It's actually pretty simple.</p><p>Any tiddler that we want to add resources to when it gets turned into a static page, we give two new fields "scripts" and "styles" and in them we write a list of the scripts and styles, respectively, to be included.</p><p>The scripts and styles refer to separate tiddlers, each of which contains either css or javascript.</p><p>We use a list widget in the <code>&lt;head&gt;</code> of the template...</p><pre><code>`
&lt;$list filter="[list[!!styles]]"&gt;
`&lt;style&gt;`
{{!!text}}
`&lt;/style&gt;`
&lt;/$list&gt;

`</code></pre><p>and another alongside the other script tags at the bottom of the body...</p><pre><code>`
&lt;$list filter="[list[!!scripts]]"&gt;
`&lt;script&gt;`
{{!!text}}
`&lt;/script&gt;`
&lt;/$list&gt;
`</code></pre><p>to transclude the contents of these tiddlers, between suitable sets of tags.</p><p>Now we can give the tiddler a scripts field, add an entry "say-yo.js", make a tiddler called "say-yo.js" and give it the content <code>
"console.log("yo!");</code> just as we did with this page.</p><p>Open the console and refresh the page and you should see that it does, in deed, "say yo"</p><h2 class="">Are We Nearly There Yet?</h2><p>We've got a nicely formatted site and all the javascript and css our hearts could desire - are we nearly done? Almost! The last important piece of the puzzle is to be able to add some images to our pages, but first we need to "fix" our URLs, hopefully before they ever become a problem.</p><p><div class="tutorial-nav">
<div class="tutorial-next-nav"><p>
Next: <a class="tc-tiddlylink tc-tiddlylink-resolves" href="./exporting-static-sites-from-tiddlywiki-part-5.html">Making the URLs web-safe.</a>
</p></div>
</div>
<div class="content-footer-navigation">
<a class="tc-tiddlylink tc-tiddlylink-resolves" href="./exporting-static-sites-from-tiddlywiki.html">Start</a> | <a class="tc-tiddlylink tc-tiddlylink-resolves" href="./tutorials.html">Tutorials</a> | <a class="tc-tiddlylink tc-tiddlylink-resolves" href="./contact.html">Contact</a>
</div></p></div>
</div>
</p>

</section><p><footer class="footer">
<div><div class="content-footer-navigation"><p><a class="tc-tiddlylink tc-tiddlylink-resolves" href="./about.html">About</a> | <a class="tc-tiddlylink tc-tiddlylink-resolves" href="./tutorials.html">Tutorials</a> | <a class="tc-tiddlylink tc-tiddlylink-resolves" href="./contact.html">Contact</a>
</p></div><p><a href="http://creativecommons.org/licenses/by/4.0/" rel="license" target="_blank"><img alt="Creative Commons License" src="https://i.creativecommons.org/l/by/4.0/88x31.png" style="border-width:0"></a></p></div><div>This work is licensed under a <a href="http://creativecommons.org/licenses/by/4.0/" rel="license" target="_blank">Creative Commons Attribution 4.0 International License</a>.</div>
<div>Made with Love in Melbourne, Australia</div>

</footer>
</p>

<script>

</script>


</body>
</html>
